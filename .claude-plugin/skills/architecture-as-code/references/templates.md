---
tags: [templates, scaffold, generated, boilerplate]
related: [bootstrap.md, discovery-playbook.md, cross-skill-integration.md]
---

# Templates

Templates for artifacts generated by architecture-as-code. Copy and customize for each system.

## Table of Contents

1. [Generated Architecture SKILL.md](#1-generated-architecture-skillmd)
2. [Reference File](#2-reference-file)
3. [Source File Index Table](#3-source-file-index-table)
4. [Routing Tables](#4-routing-tables)
5. [Config Snapshot Directory](#5-config-snapshot-directory)
6. [Coverage Audit Report](#6-coverage-audit-report)

---

## 1. Generated Architecture SKILL.md

The SKILL.md created for the target system's architecture skill.

```markdown
---
name: {system-name}
description: Cross-repo architecture knowledge for the {system description}
  ({repo1}, {repo2}, ...). Use when {trigger scenarios}. Triggers on
  {trigger phrases}.
---

# {System Name} Architecture

{One-line description}. {N} services, shared storage, independent deployments.

## Service Map

{ASCII diagram showing services, connections, and storage}

## Repos

| Repo | Path | Role |
|------|------|------|
| {repo} | {path} | {role description} |

## Routing Table

### Core Concepts

| Question | Reference |
|----------|-----------|
| "{common question}" | `references/core/{file}.md` |

### Architecture

| Question | Reference |
|----------|-----------|
| "{architecture question}" | `references/architecture/{file}.md` |

### Operations (cross-skill)

| Question | Skill / Reference |
|----------|-------------------|
| "{operational question}" | `{skill-name}` skill in `{repo}` repo |

## Critical Design Decisions

- **{Decision}**: {explanation — focus on WHY, not just WHAT}

## Knowledge Freshness

### Before trusting: verify critical claims
When this skill drives a cross-repo decision, verify against live code.

### After discovering: update this skill
If you find something that contradicts or extends this skill:
1. Read the relevant reference file
2. Update it with new information
3. Add a changelog entry

### Alert the user on drift
If you find a discrepancy: tell the user, then update the reference file.

## Changelog

| Date | Change | File |
|------|--------|------|
| {date} | Initial creation | all |
```

---

## 2. Reference File

Standard structure for each reference file in the generated architecture skill.

```markdown
---
tags: [{searchable}, {terms}]
related: [{sibling-file}.md]
canonical: true          # Include only for shared concepts in core/
snapshot: YYYY-MM-DD     # Include only for external config references
source: {path}           # Include only for external config references
---

# {Title}

{Brief overview — 1-2 sentences establishing context.}

## {Content Sections}

{Domain-specific content organized by concern. Use tables for structured data,
code blocks for commands/configs, and ASCII diagrams for flows.}

## Source Files

| File | Repo | Key Functions |
|------|------|---------------|
| `{path/file.go:line}` | {repo} | `{FunctionName}` -- {brief description} |
```

---

## 3. Source File Index Table

Standard format for `## Source Files` sections in reference files.

```markdown
## Source Files

| File | Repo | Key Functions |
|------|------|---------------|
| `{file}:{line}` | {repo} | `{Function}` -- {description} |
```

Rules:
- One row per key function (not per file)
- Line number is a helpful hint; function name is the stable anchor
- Group by repo if cross-repo reference
- Description uses imperative mood ("persist factors", not "persists factors")
- Include only functions that are central to the reference file's topic

---

## 4. Routing Tables

Three formats depending on routing direction.

### Internal routing (within the architecture skill)

```markdown
### {Category}

| Question | Reference |
|----------|-----------|
| "{natural language question}" | `references/{path}.md` |
| "{question about section}" | `references/{path}.md` > {Section Name} |
```

### Cross-skill outbound (architecture -> operational skills)

```markdown
### Operations (cross-skill)

| Question | Skill / Reference |
|----------|-------------------|
| "{operational question}" | `{skill-name}` skill in `{repo}` repo |
| "{specific question}" | `{skill-name}` > `references/{path}.md` |
```

### Cross-skill inbound (document what downstream skills can access)

```markdown
`{downstream-skill}` depends on this skill for {concept1} and {concept2} context.
```

---

## 5. Config Snapshot Directory

For external configs tracked in git (rule engines, LLM prompts, feature flags).

```
{repo}/detection-config/
  {config-type}/                    # kebab-case: dolphin-rules, llm-prompts
    {YYYY-MM-DD}/                   # Date of export
      {export-file-1}.json          # Raw export, original format
      {export-file-2}.md
    {YYYY-MM-DD}/                   # Later snapshot (never overwrite old)
      {export-file-1}.json
```

Reference file points to snapshot:
```yaml
---
snapshot: YYYY-MM-DD
source: detection-config/{type}/{date}/ ({repo}, git-tracked)
---
```

Rules:
- New exports get a NEW date directory (never overwrite)
- Git diff between date directories shows changes
- Keep original format (JSON, YAML, markdown)
- Commit with: `chore: snapshot {config-type} {date}`

---

## 6. Coverage Audit Report

Output format for Workflow 4 (assess coverage).

```markdown
## Architecture Coverage Audit -- {System Name}

**Date**: YYYY-MM-DD
**Skill**: {skill-name}
**Repos**: {covered}/{total}

### Coverage Matrix

| Repo | Covered | Reference Files | Source Indexes | Last Verified |
|------|---------|----------------|----------------|---------------|
| {repo} | {Yes/No/Partial} | {count} | {Yes/Partial/No} | {date} |

### Source Index Health

| Reference File | Entries | Verified | Stale | Missing |
|---------------|---------|----------|-------|---------|
| {file} | {n} | {n} | {n} | {n} |

### Gaps & Actions

| Gap | Priority | Recommended Action |
|-----|----------|-------------------|
| {description} | {High/Medium/Low} | {action} |
```
